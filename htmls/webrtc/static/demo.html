<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <link rel="icon" href="https://img-oss.yunshanmeicai.com/amp/default/icon/amp_app_1546420209_8986_icon.png" type="image/x-icon" />
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no">
  <meta name="format-detection" content="address=no">
  <title>webrtc 测试</title>
  <link href="./css/demo.css" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="./js/socket.io-client.js"></script>
  <script type="module" src="./client/web.js"></script>
</head>
<body>
  <div class="op-er">
    <p class="roomUserNum"></p>
    <button type="button" id="btn">发起视频</button>
    <button type="button" id="shareBtn" style="display: none;">发起屏幕共享</button>
  </div>
  <div class="main">
    <video class="remote"></video>
    <video class="local"></video>    
  </div>
  <script type="module">
    import demoAPI from './client/web.js';

    // 直接进入房间
    demoAPI.joinRoom({ roomNo: '123' });

    const chatBtn = document.querySelector('#btn');
    const displayBtn = document.querySelector('#shareBtn');

    // 发起视频
    document.querySelector('#btn').addEventListener('click', () => {
      demoAPI.startSDP();
      chatBtn.style.display = 'none';
      displayBtn.style.display = '';
    });

    // 发起屏幕共享
    document.querySelector('#shareBtn').addEventListener('click', () => {
      demoAPI.shareDesktop();
    });

  </script>
</body>
</html>
